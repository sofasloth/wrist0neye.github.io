---
title: Github 블로그 꾸며보기2
date: 2024-08-08 00:53:00 +0900
categories:
  - Doodle
  - Diary
permalink: /Github 블로그 꾸며보기2/
tags:
  - diary
  - blog
comments: true
published: true
math: true
image:
---
github 블로그는 나 같은 초보자한테 초기세팅부터 어려웠다. 다행히 *Chirpy* 블로그가 디자인이 깔끔하면서 초기세팅이 편한 편이었다. 그럼에도 Tistory나 velog에 비해 손이 많이 가는데, 내가 옵시디언을 정말 자주 사용하기 때문에 오히려 좋은 점도 많다.

예를 들어, 내가 이전에 작성한 블로그를 참고하고 싶으면 옵시디언으로 켜서 편집을 하면 된다. 이미지 그대로 사용하고 싶으면 드래그 앤 드롭으로 옮겨주면 알아서 참조해준다.

![](assets/img/res/Pasted%20image%2020240808010433.png) ^9f4625

그리고 나는 local graph view 말고 graph view 자체는 잘 안 쓰는데 가끔 한 번씩 키면 괜시리 열심히 작성했다는 느낌을 받는다.

![Pasted image 20240808010356](assets/img/res/Pasted%20image%2020240808010356.png)
또, 이미지 파일, `.gif` 같은 첨부파일 관리가 편하다. 파일 위치가 변경되어도 옵시디언에서 알아서 파일 위치를 업데이트 해준다.

그 대신 옵시디언을 사용하기 전에 몇 가지 세팅을 해줘야 한다.
## 1. File & links

![](assets/img/res/Pasted%20image%2020240808011033.png)

- Default location for new notes에서 `In the folder specified below`를 체크하고  `_posts`로 경로 지정
- New link format은 `Shortest..`로 설정해야 나중에 `relative link` 기능을 사용할 수 있다.
	- 수정하기 전에 `Absolute`로 표기했는데 이렇게 하면 노트 간 link 걸기가 어렵다.
- `[[Wikilinks]]` 사용을 해제한다. 
	- 옵시디언의 경우 `![[파일이름]]` 으로 파일을 임베드 혹은 참조를 하는데 이 기능은 옵시디언에서만 지원한다.
	- 이 기능을 키면 띄워쓰기도 `%20`으로 치환되서 확실하게 참조해주기 때문에 꼭 켜주자.
	- 보통의 마크다운처럼 `![]()`으로만 참조한다.
- Detect all file extensions 필수는 아니지만 스크립트 파일을 사용한다면 이걸 체크해야 보인다.
	- 대신, file 탐색 결과가 지저분해진다는 단점이 있다.
- Default location for new attachements는 사진, gif 파일 같은 첨부파일을 어디로 저장할지 설정하는 값이다. 이 부분은 취향이니 편한대로 세팅하자.

## 2. Template 및 노트 기본값 설정
- 우선, template 파일을 만들자.
- 이 부분이 옵시디언 + github 불편한 점 중 하나인데, 옵시디언이 최근 **metadata(properties)** 를 페이지처럼 만들어서 자꾸 형식이 깨진다.
- 문서 metadata 설정할 때만큼은 반드시 **live preview** 모드를 끄고 **source mode**로 바꿔주자.

![](assets/img/res/Pasted%20image%2020240808012221.png)

> *Chirpy* 블로그의 경우 특히, `image` 설정 부분이 아래 사진처럼 해야 하는데 최신 버전의 옵시디언은 `path: ...` 형식을 잘 인식하지 못한다. 그렇기 때문에 이 부분은 어쩔 수 없이 source mode로 작성해줘야 한다.
{: .prompt-warning }

![](assets/img/res/Pasted%20image%2020240808012409.png)

그러고 나서 **Daily note**와 **Unique note creator** 중 사용하는 기능에 대해서 위에서 만든 *template*파일을 template으로 설정해주면 파일생성할 때 대부분의 metadata는 자동으로 완성시켜줄 것이다.

![](assets/img/res/Pasted%20image%2020240808012836.png)

## 3. 스크립트 파일 만들기
이거는 mac/리눅스면 bash, 윈도우면 batch파일을 만들어서 해도 되고 아니면 `os.system()`으로 도배된 `.py`로도 충분히 구현할 수 있는 기능이다. 다만, 파이썬의 경우 아나콘다같은 프로그램을 깔았으면 환경변수가 바뀌어서 파이썬 스크립트 실행이 안 될 때도 있다. 그럴 땐 다시 `.py`를 직접 실행하는 bash/batch 파일을 만들어도 된다.

 아무튼 일단 있으면 편한 `jekyll` 빌드 스크립트 파일만 만들고 필요하면 추가해서 쓰면 된다.
 1. `jekyll` localhost 빌드
 2. 수동 git-add-commit-push 자동 스크립트

### 1. jekyll localhost 빌드
실행하는 스크립트 위치를 잘 고려해서 다음 코드를 작성한다. `ruby` 환경변수 설정이 되어 있다면 win/mac/linux 사용가능 한 코드다.
```shell
bundle exec jekyll serve --trace
```

### 2. git add-commit-push 자동화
- git 써드파티 플러그인을 깔았으면 자동으로 백업 타이머를 맞추면 된다.
- 근데 블로그 빌드 실패했거나, 수동으로 push 하고 싶을 때 아래 스크립트를 실행한다.

```batch
@echo off
set "currentDate=%date%"
set "currentTime=%time%"

for /f "tokens=1-4 delims=/- " %%a in ("%currentDate%") do (
    set "year=%%a"
    set "month=00%%b"
    set "day=00%%c"
)

set month=%month:~-2%
set day=%day:~-2%
set "formattedDate=%year%-%month%-%day%"

for /f "tokens=1-3 delims=:., " %%a in ("%currentTime%") do (
    set "hour=00%%a"
    set "minute=00%%b"
    set "second=00%%c"
)

set hour=%hour:~-2%
set minute=%minute:~-2%
set second=%second:~-2%
set "formattedTime=%hour%:%minute%:%second%"

:: commit 메시지 확인용
echo "[Comment]blog update at %formattedDate% T %formattedTime%"

@echo on
pause


git add -A
git commit -m "blog update at %formattedDate% T %formattedTime%"

pause

git push origin main
pause
```

## 4. ruby plugin 설치하기
### [1. jekyll-relative-links](https://github.com/benbalter/jekyll-relative-links)
markdown `[다른 파일](다른 파일.md)` 링크를 걸고 싶으면  위 링크의 플러그인을 설치해야 한다.
```ruby
gem install jekyll-relative-links
```

성공적으로 설치가 되었다면 [이전 글](2024-08-04-Github.io블로그%20꾸며보기.md)을 참조할 수 있게 된다.
- 2차 시도 : [이전글](2024-08-04-Github.io블로그%20꾸며보기.md)
- 문서 내부 이동 : `[[#]]`으로 원하는 Heading 선택 [[#]]
	- Head link로 이동 : `[[#]]`으로 원하는 Head 선택하기 [예시](#2.%20Template%20및%20노트%20기본값%20설정)
		- 주소창에 올 수 없는 글자 `&`나 띄워쓰기가 나오면 `-`으로 변환해줘야 한다.
		- 소문자로 바꿔야 한다. 
	- 문단 / 이미지 이동하기 : `[[^]]`으로 원하는 문단 / 이미지 선택하기 [예시](#^9f4625)
> 여전히 잘 안 된다..


### [2. linkpreview](https://github.com/ysk24ok/jekyll-linkpreview)
```ruby
gem install jekyll-gist jekyll-coffeescript jekyll-remote-theme some-other-jekyll-plugin jekyll-linkpreview
```

그리고 `/assets/css` 폴더 내에 `linkpreview.css` 파일을 생성한다. 내용은 [여기 페이지 코드](https://github.com/ysk24ok/jekyll-linkpreview/blob/master/assets/css/linkpreview.css)대로 채우면 된다.

[2024-08-04-Github.io블로그 꾸며보기](_posts/2024-08-04-Github.io블로그%20꾸며보기.md)에서 rich link 구현을 실패했었는데, 위 플러그인을 설치하고 아래와 같은 문법으로 작성하면 livepreview 링크를 만들 수 있다. 

{% raw %}
```liquid
{% linkpreview "url" %}
```
{% endraw %}

Linkpreview의 기본 css 스타일과 Chirpy 스타일과 조금 잘 안 어울린다. 그에 맞게 약간의 수정이 필요하다. 개발자 도구를 열어보면 `_layouts/home.html`를 열어보면 이 테마의 preview는 `bootstrap`의 `card`인 걸 확인할 수 있다. 

그리고 `.row` 코드와 같이 특정 폭 크기에 따라 형태가 바뀌는 `@media`도 적용되어 있다. `home.html`의 일부 코드는 아래와 같다.
{% raw %}
```html
<div id="post-list" class="flex-grow-1 px-xl-1">
  {% for post in posts %}
    <article class="card-wrapper card">
      <a href="{{ post.url | relative_url }}" class="post-preview row g-0 flex-md-row-reverse">
        {% assign card_body_col = '12' %}
        
        {% if post.image %}
          {% assign src = post.image.path | default: post.image %}
          {% unless src contains '//' %}
            {% assign src = post.media_subpath | append: '/' | append: src | replace: '//', '/' %}
          {% endunless %}
  
          {% assign alt = post.image.alt | xml_escape | default: 'Preview Image' %}
  
          {% assign lqip = null %}
  
          {% if post.image.lqip %}
            {% capture lqip %}lqip="{{ post.image.lqip }}"{% endcapture %}
          {% endif %}
  
          <div class="col-md-5">
            <img src="{{ src }}" alt="{{ alt }}" {{ lqip }}>
          </div>
  
          {% assign card_body_col = '7' %}
        {% endif %}
  
        <div class="col-md-{{ card_body_col }}">
          <div class="card-body d-flex flex-column">
            <h1 class="card-title my-2 mt-md-0">{{ post.title }}</h1>
  
            <div class="card-text content mt-0 mb-3">
              <p>{% include post-description.html %}</p>
            </div>
  
            <div class="post-meta flex-grow-1 d-flex align-items-end">
              <div class="me-auto">
                <!-- posted date -->
                <i class="far fa-calendar fa-fw me-1"></i>
                {% include datetime.html date=post.date lang=lang %}
  
                <!-- categories -->
                {% if post.categories.size > 0 %}
                  <i class="far fa-folder-open fa-fw me-1"></i>
                  <span class="categories">
                    {% for category in post.categories %}
                      {{ category }}
                      {%- unless forloop.last -%},{%- endunless -%}
                    {% endfor %}
                  </span>
                {% endif %}
              </div>
  
              {% if post.pin %}
                <div class="pin ms-1">
                  <i class="fas fa-thumbtack fa-fw"></i>
                  <span>{{ site.data.locales[lang].post.pin_prompt }}</span>
                </div>
              {% endif %}
            </div>
            <!-- .post-meta -->
          </div>
          <!-- .card-body -->
        </div>
      </a>
    </article>
  {% endfor %}
</div>
<!-- #post-list -->
```
{% endraw %}


![bootstrap_card](assets/img/res/bootstrap_card.gif)

{% linkpreview "https://github.com/ysk24ok/jekyll-linkpreview" %}

{% linkpreview "https://www.google.com" %}

{% linkpreview "https://www.naver.com" %}

{% linkpreview "https://www.github.com" %}