---
title: Github 블로그 꾸며보기(2)
date: 2024-08-08 00:53 +0900
categories:
  - Doodle
  - Diary
tags:
  - diary
  - blog
comments: true
published: true
math: true
image:
---
>`[2024-08-04-Github.io블로그 꾸며보기](_posts/2024-08-04-Github.io블로그%20꾸며보기.md)` github 블로그에서는 옵시디언의 **노트링크** 기능을 지원하지 않고 github Action 빌드 실패를 일으킨다. 기회되면 이 문제점을 고쳐보려고 한다. 
>![](assets/img/res/Pasted%20image%2020240808022308.png)
{: .prompt-warning}


깃허브 블로그는 나 같은 초보자한테 초기세팅부터 어려웠다. 다행히 *Chirpy* 블로그가 디자인이 깔끔하면서 초기세팅이 편한 편이었다.

Tistory나 velog에 비해 여전히 어렵지만 옵시디언을 정말 자주 사용하기 때문에 오히려 github 블로그는 나한테 괜찮았다.

예를 들어, 내가 이전에 작성한 블로그를 참고하고 싶으면 옵시디언으로 켜서 편집을 하면 된다. 이미지 그대로 사용하고 싶으면 드래그 앤 드롭으로 옮겨주면 알아서 참조해준다.

![](assets/img/res/Pasted%20image%2020240808010433.png)

그리고 나는 local graph view 말고 graph view 자체는 잘 안 쓰는데 가끔 한 번씩 키면 괜시리 열심히 작성했다는 느낌을 받는다.

![Pasted image 20240808010356](assets/img/res/Pasted%20image%2020240808010356.png)
또, 이미지 파일, gif를 관리가 편하다. 파일 위치가 변경되도 옵시디언에서 알아서 위치를 업데이트 해준다.

그 대신 옵시디언을 사용하기 전에 몇 가지 세팅을 해줘야 한다.
#### 1. File & links

![](assets/img/res/Pasted%20image%2020240808011033.png)

- Default location for new notes에서 `In the folder specified below`를 체크하고  `_posts`로 경로 지정
- New link format은 항상 `Absolute`로 해줘야 절대경로 기준으로 참조한다.
	- 내 경험상 깃허브 마크다운은 절대경로로 지정하지 않으면 참조가 잘 안 되었던 걸로 기억한다. 이 기능을 키면 띄워쓰기도 `%20`으로 치환되서 확실하게 참조해주기 때문에 꼭 켜주자.
- `[[Wikilinks]]` 사용을 해제한다. 
	- 옵시디언의 경우 `![[파일이름]]` 으로 파일을 임베드 혹은 참조를 하는데 깃허브 마크다운에서는 이 기능을 지원하지 않는다. 
	- 이 기능을 끄면 보통의 마크다운처럼 `![]()`으로만 참조한다.
- Detect all file extensions 필수는 아니지만 스크립트 파일을 사용한다면 이걸 체크해야 보인다.
- Default location for new attachements는 사진, gif 파일 같은 첨부파일을 어디로 저장할지 설정하는 값이다. 이 부분은 취향이니 편한대로 세팅하자.

#### 2. Template 및 노트 기본값 설정
- 우선, template 파일을 만들자.
- 이 부분이 옵시디언 + github 불편한 점 중 하나인데, 옵시디언이 최근 **metadata(properties)** 를 페이지처럼 만들어서 자꾸 형식이 깨진다.
- 문서 metadata 설정할 때만큼은 반드시 **live preview** 모드를 끄고 **source mode**로 바꿔주자.

![](assets/img/res/Pasted%20image%2020240808012221.png)

> *Chirpy* 블로그의 경우 특히, `image` 설정 부분이 아래 사진처럼 해야 하는데 최신 버전의 옵시디언은 `path: ...` 형식을 잘 인식하지 못한다. 그렇기 때문에 이 부분은 어쩔 수 없이 source mode로 작성해줘야 한다.
{: .prompt-warning }

![](assets/img/res/Pasted%20image%2020240808012409.png)

그러고 나서 **Daily note**와 **Unique note creator** 중 사용하는 기능에 대해서 위에서 만든 *template*파일을 template으로 설정해주면 파일생성할 때 대부분의 metadata는 자동으로 완성시켜줄 것이다.

![](assets/img/res/Pasted%20image%2020240808012836.png)

#### 3. 스크립트 파일 만들기
이거는 mac/리눅스면 bash, 윈도우면 batch파일을 만들어서 해도 되고 아니면 `os.system()`으로 도배된 `.py`로도 충분히 구현할 수 있는 기능이다. 다만, 파이썬의 경우 아나콘다같은 프로그램을 깔았으면 환경변수가 바뀌어서 파이썬 스크립트 실행이 안 될 때도 있다. 물론 저럴 때는  다시 `.py`를 직접 실행하는 bash/batch 파일을 만들어도 된다.

 일단 있으면 편한 `jekyll` 스크립트 파일만 만들고 필요하면 추가해서 쓰면 된다.
 1. `jekyll` localhost 빌드

##### 1. jekyll localhost 빌드
실행하는 스크립트 위치를 잘 고려해서 다음 코드를 작성한다. `ruby` 환경변수 설정이 되어 있다면 win/mac/linux 사용가능 한 코드다.
```shell
bundle exec Jekyll serve --trace
```

##### 2. git add-commit-push 자동화
- git 써드파티 플러그인을 깔았으면 자동으로 백업 타이머를 맞추면 된다.
- 근데 가끔 수동으로 push 하고 싶을 때 아래 스크립트를 실행한다.

```bat
@echo off
set "currentDate=%date%"
set "currentTime=%time%"

for /f "tokens=1-4 delims=/- " %%a in ("%currentDate%") do (
    set "year=%%a"
    set "month=00%%b"
    set "day=00%%c"
)

set month=%month:~-2%
set day=%day:~-2%
set "formattedDate=%year%-%month%-%day%"

for /f "tokens=1-3 delims=:., " %%a in ("%currentTime%") do (
    set "hour=00%%a"
    set "minute=00%%b"
    set "second=00%%c"
)

set hour=%hour:~-2%
set minute=%minute:~-2%
set second=%second:~-2%
set "formattedTime=%hour%:%minute%:%second%"

echo "[Comment]blog update at %formattedDate% T %formattedTime%"

@echo on
pause


git add -A
git commit -m "blog update at %formattedDate% T %formattedTime%"

pause

git push origin main
pause
```